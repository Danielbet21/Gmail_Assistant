{% extends "base.html" %}
{% block title %}Deft.B | Send {% endblock %}
{% block content %}

<style>
    .form-floating{
        width: 300px;
    }
    .text_chat {
        display: flex;
        width: 90%;
        justify-content: space-between;
    }
    .form-floating.textarea-container {
        display: flex;
        width: 90%;
        justify-content: space-between;
    }
    .form-floating.textarea-container-chat {
        display: flex;
        width: 90%;
        justify-content: space-between;
        border: 5px;
        
    }
    .oval-textarea {
        border-radius: 25px; 
        padding: 15px;
        width: 100%;   
        height: 500px; 
        resize: vertical; 
        border: 5px solid;
    }
    .oval-textarea-colored {
        border: 5px solid;
        border-image: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet) 1;
    }
    .form-container {
        flex-direction: column;
    }
    .head-email {
        font-size: 20px;
        font-weight: bold;
    }
    .head-subject {
        font-size: 20px;
        font-weight: bold;
    }
    form {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 70px;
    }
</style>

<div class="form-container">
    <form action="/api/v1/gmail/messages/send" method="post">
        
        <div class="form-floating mb-3">
            <p class ="head-email">Sent To: </p>
            <input type="email" class="form-control" width="300px" id="floatingInputInvalid" name="to" placeholder="name@example.com">
        </div>
        <div class="form-floating mb-3">
            <p class ="head-subject">Subject: </p>
            <input type="text" class="form-control" id="floatingSubject" name="subject">
        </div>
        <!--the text and chat area-->
        <div class="text_chat">
            <div class="form-floating mb-3 textarea-container">
                <textarea class="form-control oval-textarea" height=500px id="floatingMessage" name="message" placeholder="Message"></textarea>
            </div>
            <div class="form-floating mb-3 textarea-container-chat">
                <textarea class="form-control oval-textarea oval-textarea-colored" id="userMessage" name="userMessage" placeholder="This is where the chat will be"></textarea>
            </div>
        </div>
        <input type="submit" value="Send Message" class="btn btn-primary center-button">
    </form>

</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<!-- jQuery usage for dynamic validation for the email field -->
<script>
$(document).ready(function() {
    $('#floatingInputInvalid').on('input', function() {
        var input=$(this);
        var re = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;
        var is_email=re.test(input.val());
        if(is_email){input.removeClass("is-invalid").addClass("is-valid");}
        else{input.removeClass("is-valid").addClass("is-invalid");}
    });
});
</script>
{% endblock %}